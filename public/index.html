<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="favicons/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="favicons/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="favicons/android-chrome-512x512.png">
    
    <title>Volleyball Coach - Position Training</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div class="app-container">
        <!-- <header>
            <h1>Volleyball Position Training</h1>
        </header> -->
        
        <div class="main-content">
            <!-- Sidebar with Accordions -->
            <div class="sidebar">

                <!-- Accordion: Players -->
                <div class="accordion" data-accordion="players">
                    <div class="accordion-header">
                        <h3><i data-lucide="users"></i> Players</h3>
                        <i data-lucide="chevron-down" class="accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="add-player-form">
                            <input type="text" id="player-name" placeholder="Name">
                            <input type="number" id="jersey-number" placeholder="#" min="1" max="99" class="jersey-input">
                            <button id="add-player-btn">+ Add</button>
                        </div>
                        <div class="lineup-list" id="lineup-list">
                            <!-- Players will be added here -->
                        </div>
                    </div>
                </div>

                <!-- Accordion: Positions -->
                <div class="accordion" data-accordion="positions">
                    <div class="accordion-header">
                        <h3><i data-lucide="map-pin"></i> Positions</h3>
                        <i data-lucide="chevron-down" class="accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="search-filter-bar">
                            <div class="search-input-wrapper">
                                <input type="text" id="position-search-input" placeholder="Search positions...">
                                <button id="tag-filter-btn" class="tag-filter-btn" title="Filter by tags">
                                    <i data-lucide="tag"></i>
                                </button>
                            </div>
                            <div class="selected-tags" id="selected-tags-container">
                                <!-- Selected tags will appear here -->
                            </div>
                        </div>
                        <button id="new-position-btn" class="new-position-btn">+ New Position</button>
                        <div class="items-list" id="positions-list">
                            <!-- Positions will be added here -->
                        </div>
                    </div>
                </div>

                <!-- Accordion: Scenarios -->
                <div class="accordion" data-accordion="scenarios">
                    <div class="accordion-header">
                        <h3><i data-lucide="film"></i> Scenarios</h3>
                        <i data-lucide="chevron-down" class="accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="create-form">
                            <input type="text" id="scenario-name-input" placeholder="Scenario name">
                            <select id="scenario-start-select">
                                <option value="">Start Position...</option>
                            </select>
                            <select id="scenario-end-select">
                                <option value="">End Position...</option>
                            </select>
                            <button id="create-scenario-btn">Create Scenario</button>
                        </div>
                        <div class="items-list" id="scenarios-list">
                            <!-- Scenarios will be added here -->
                        </div>
                    </div>
                </div>

                <!-- Accordion: Sequences -->
                <div class="accordion" data-accordion="sequences">
                    <div class="accordion-header">
                        <h3><i data-lucide="list-ordered"></i> Sequences</h3>
                        <i data-lucide="chevron-down" class="accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="create-form">
                            <input type="text" id="sequence-name-input" placeholder="Sequence name">
                            <button id="create-sequence-btn">Create Sequence</button>
                        </div>
                        <div class="items-list" id="sequences-list">
                            <!-- Sequences will be added here -->
                        </div>
                    </div>
                </div>

                <!-- Accordion: Data Management -->
                <div class="accordion" data-accordion="data-management">
                    <div class="accordion-header">
                        <h3><i data-lucide="database"></i> Data Management</h3>
                        <i data-lucide="chevron-down" class="accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="data-buttons">
                            <button id="export-json-btn">Export JSON</button>
                            <button id="export-xml-btn">Export XML</button>
                            <button id="import-btn">Import File</button>
                            <input type="file" id="import-file" accept=".json,.xml" style="display: none;">
                        </div>
                        <p class="data-info" id="file-status">Data is automatically saved to data.json file.</p>
                    </div>
                </div>
            </div>

            <!-- Court Section -->
            <div class="court-section">
                <div class="court-container">
                    <div class="court" id="court">
                        <!-- Net -->
                        <div class="net"></div>
                        <!-- 10ft line (attack line) -->
                        <div class="attack-line"></div>
                        <!-- Player positions will be added here -->
                    </div>
                </div>

                <!-- State Indicator and Animation Controls -->
                <div class="court-controls">
                    <!-- State Indicator -->
                    <div class="state-indicator" id="state-indicator">
                        <div class="current-item" id="current-item-display">
                            <span class="label">Loaded:</span>
                            <span class="value" id="current-item-value">None</span>
                        </div>
                        <div class="modified-indicator" id="modified-indicator" style="display: none;">
                            <span class="badge">Modified</span>
                            <div class="save-actions">
                                <button id="save-btn" class="btn-save">Save</button>
                                <button id="save-as-btn" class="btn-save-as">Save As</button>
                                <button id="discard-btn" class="btn-discard">Discard</button>
                            </div>
                        </div>
                    </div>

                    <!-- Animation Controls -->
                    <div class="animation-controls">
                        <div class="animation-header">
                            <h3>Animation</h3>
                        </div>
                        
                        <!-- Position Drop Zones -->
                        <div class="position-drop-zones">
                            <div class="drop-zone" id="start-position-zone" data-zone-type="start">
                                <div class="drop-zone-label">Start Position</div>
                                <div class="drop-zone-content" id="start-position-content">
                                    <span class="drop-zone-placeholder">Drag position here</span>
                                </div>
                                <button class="drop-zone-clear" id="clear-start-position" style="display: none;" title="Clear">
                                    <i data-lucide="x"></i>
                                </button>
                            </div>
                            <div class="drop-zone" id="end-position-zone" data-zone-type="end">
                                <div class="drop-zone-label">End Position</div>
                                <div class="drop-zone-content" id="end-position-content">
                                    <span class="drop-zone-placeholder">Drag position here</span>
                                </div>
                                <button class="drop-zone-clear" id="clear-end-position" style="display: none;" title="Clear">
                                    <i data-lucide="x"></i>
                                </button>
                            </div>
                        </div>
                        <button id="clear-scenario-btn" class="clear-scenario-btn" style="display: none;" title="Clear scenario">
                            <i data-lucide="x-circle"></i> <span>Clear Scenario</span>
                        </button>
                        
                        <div class="animation-buttons">
                            <button id="play-animation-btn"><i data-lucide="play"></i> <span>Play</span></button>
                            <button id="next-scenario-btn" style="display: none;"><i data-lucide="skip-forward"></i> <span>Next</span></button>
                            <button id="refresh-position-btn" style="display: none;"><i data-lucide="refresh-cw"></i> <span>Reset</span></button>
                        </div>
                        <div class="sequence-progress" id="sequence-progress" style="display: none;">
                            <span id="sequence-progress-text">Scenario 1 of 3</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal-overlay" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title"></h3>
                <button class="modal-close" id="modal-close">Ã—</button>
            </div>
            <div class="modal-body" id="modal-body"></div>
            <div class="modal-footer" id="modal-footer"></div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
